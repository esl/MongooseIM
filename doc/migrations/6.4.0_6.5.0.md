## Configuration options

There are some possible adjustments to the configuration file that you might need to make before upgrading.

### TLS `certfile` and `keyfile`

There are following places in the TOML configuration file where you can set up TLS certificates:

- [Outgoing connection pools](../configuration/outgoing-connections.md#tls-options)
- [S2S outgoing connections](../configuration/s2s.md#tls-options-for-outgoing-connections)
- [C2S listener](../listeners/listen-c2s.md#tls-options-for-c2s)
- [S2S listener](../listeners/listen-s2s.md#configuration-options)
- [Component listener](../listeners/listen-components.md#tls-options-for-components)
- [HTTP listener](../listeners/listen-http.md#tls-https-options)
- [Global distribution module](../modules/mod_global_distrib.md#tls-options)

In all such places, you specify the certificate file with the `certfile` option,
and the private key file with the `keyfile` option.
However, previous versions of MongooseIM also allowed putting the certificate concatenated with the private key
into one file referenced with the `certfile` option.
This is **no longer accepted** due to an update in Erlang/OTP 28.1,
and you need to make sure to use separate `certfile` and `keyfile` before upgrading MongooseIM.

### RabbitMQ notifications: `mod_event_pusher_rabbit`

The [`mod_event_pusher_rabbit`](../modules/mod_event_pusher_rabbit.md) module used for sending RabbitMQ notifications is now more configurable.
Instead of always sending all notifications, it only enables the ones with a relevant section in the module configuration:

- [`presence_exchange`](../modules/mod_event_pusher_rabbit.md#presence-options) for presences,
- [`chat_msg_exchange`](../modules/mod_event_pusher_rabbit.md#chat-message-options) for chat messages,
- [`groupchat_msg_exchange`](../modules/mod_event_pusher_rabbit.md#group-chat-message-options) for group chat messages.

Make sure you have all the necessary sections present in the configuration file before upgrading.

### Custom backends for `mod_event_pusher`

If you have a custom backend implemented for `mod_event_pusher`, you need to update it to handle the `push_event` hook instead of implementing the `mod_event_pusher` behaviour (which no longer exists). See details in the [module documentation](../modules/mod_event_pusher.md)

### TLS connections to RabbitMQ and Redis

Outgoing connections to RabbitMQ or Redis can use TLS, both for session management and global distribution.
See configuration options in [Outgoing connection pools](../configuration/outgoing-connections.md#tls-options)

### Deprecation

MSSQL backend is deprecated and will be removed in the next release.
