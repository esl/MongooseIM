## MS SQL and ODBC are no longer supported

The Microsoft SQL Server database is no longer supported, and you cannot set the [RDBMS driver](../configuration/outgoing-connections.md/#outgoing_poolsrdbmsconnectiondriver) to `odbc` anymore.
In case you used this database, you need to migrate to another supported RDBMS, e.g. MySQL, MariaDB, PostgreSQL or CockroachDB.

## BOSH and WebSocket changes

### `mod_bosh` replaced with `mongoose_bosh_handler` and `service_bosh`

The `mod_bosh` module had inconsistent behaviour when configured for multiple host types (or static hosts).
This is why we have replaced it with [`service_bosh`](../configuration/Services.md#service_bosh).
You need to change your configuration to use the new service instead of the removed module.
If you had it configured in `host_config`, you can use the new option [`service_bosh.host_types`](../configuration/Services.md#servicesservice_boshhost_types) to achieve the same effect.

We have also moved the HTTP handler from `mod_bosh` to a new module called `mongoose_bosh_handler`.
Update the handler name in your configured [HTTP listeners](../listeners/listen-http.md#handler-types-bosh-mongoose_bosh_handler) sections if you have it configured.

!!! Tip
    This is also a good opportunity to check if you need BOSH - if not, you can remove the `mod_bosh` module and HTTP handler without adding the new ones.

### `mod_websockets` replaced with `mongoose_websocket_handler`

Following the BOSH refactor, we have also renamed the `mod_websockets` HTTP handler to `mongoose_webdocket_handler`.
Update the handler name in your configured [HTTP listeners](../listeners/listen-http.md#handler-types-websockets-mongoose_websocket_handler) sections if you have it configured.

!!! Tip
    This is also a good opportunity to check if you need WebSockets - if not, you can remove the `mod_websocket` HTTP handler without adding the new one.

### Metrics

As part of the BOSH and WebSocket refactor, we have updated the names of BOSH and WebSocket metrics. The table below summarizes the changes. The names presented in the table are assuming that Prometheus is used. For more information, e.g. about Prometheus labels or Exometer metrics, follow the links in the table.

| Previous metrics | Current metrics  | More information |
| ---------------- | ---------------- | ---------------- |
| `mod_bosh_data_received_byte_size`,<br> `mod_bosh_data_sent_byte_size`,<br> `mod_websocket_data_received_byte_size`,<br> `mod_websocket_data_sent_byte_size` | `bosh_data_received_byte_size`, <br> `bosh_data_sent_byte_size`, <br> `websocket_data_received_byte_size`, <br> `websocket_data_sent_byte_size` | [Network data](../operation-and-maintenance/MongooseIM-metrics.md#network-data-metrics) |

## Removal of admin REST API

This API was originally used for administration purposes, e.g. managing users, changing passwords,
managing multi-user chats etc. Since the introduction of GraphQL API this feature was deprecated. 
Starting from this release it is removed from codebase.

## Removal of client REST API

This API was originally used to aid in development of client applications and integrations, providing a subset of XMPP features.
Since the introduction of GraphQL API this feature was deprecated. Starting from this release it is removed from codebase.

### Configuration file update

From your TOML configuration file, remove http listener definition `listen.http.handlers.mongoose_admin_api` and `listen.http.handlers.mongoose_client_api`.

## Configuration options

### Removal of `rdbms_server_type`

The `general.rdbms_server_type` option is removed, and it has to be deleted from the TOML configuration file.
It was used to customize queries for the ODBC driver, which is not supported anymore.

### RabbitMQ connection pool

The RabbitMQ-specific connection option `max_worker_queue_len` is now replaced with a more generic [worker pool option](../configuration/outgoing-connections.md#outgoing_poolsmax_worker_queue_len) with the same name.
Contrary to the removed option, it now ensures that the queue limit is never exceeded.
Make sure you use the new option instead of the removed one.

## Database migration

There is a new table `blocklist` in the database, which is used by `mod_blocklist`. See the migrations in the [`priv/migrations`](https://github.com/esl/MongooseIM/tree/master/priv/migrations) directory. Although the new table is only needed by this module, we recommend applying the migration anyway to keep the database in sync with the latest schema.
