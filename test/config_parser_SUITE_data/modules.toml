[general]
  hosts = [
    "localhost",
    "dummy_host"
  ]

[modules.mod_adhoc]
  iqdisc.type = "one_queue"
  report_commands_node = true

[modules.mod_auth_token]
  validity_period = [
    {token = "access", value = 13, unit = "minutes"},
    {token = "refresh", value = 13, unit = "days"}
  ]

[modules.mod_bosh]
  inactivity = 20
  max_wait = "infinity"
  server_acks = true
  backend = "mnesia"
  maxpause = 120

[modules.mod_caps]
  cache_size = 1000
  cache_life_time = 86

[modules.mod_carboncopy]
  iqdisc.type = "no_queue"

[modules.mod_csi]
  buffer_max = 40

[modules.mod_disco]
  iqdisc.type = "one_queue"
  extra_domains = ["some_domain", "another_domain"]
  server_info = [
    {module = "all", name = "abuse-address", urls = ["admin@example.com"]},
    {module = ["mod_muc", "mod_disco"], name = "friendly-spirits", urls = ["spirit1@localhost", "spirit2@localhost"]}
  ]
  users_can_see_hidden_services = true

[modules.mod_event_pusher]
  backend.sns.access_key_id = "AKIAIOSFODNN7EXAMPLE"
  backend.sns.secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"
  backend.sns.region = "eu-west-1"
  backend.sns.account_id = "123456789012"
  backend.sns.sns_host = "sns.eu-west-1.amazonaws.com"
  backend.sns.muc_host = "conference.HOST"
  backend.sns.plugin_module = "mod_event_pusher_sns_defaults"
  backend.sns.presence_updates_topic = "user_presence_updated"
  backend.sns.pm_messages_topic = "user_message_sent"
  backend.sns.muc_messages_topic = "user_messagegroup_sent"
  backend.sns.pool_size = 100
  backend.sns.publish_retry_count = 2
  backend.sns.publish_retry_time_ms = 50

  backend.push.backend = "mnesia"
  backend.push.wpool.workers = 200
  backend.push.plugin_module = "mod_event_pusher_push_plugin_defaults"
  backend.push.virtual_pubsub_hosts = ["host1", "host2"]

  backend.http.pool_name = "http_pool"
  backend.http.path = "/notifications"
  backend.http.callback_module = "mod_event_pusher_http_defaults"

  backend.rabbit.presence_exchange.name ="presence"
  backend.rabbit.presence_exchange.type = "topic"
  backend.rabbit.chat_msg_exchange.name = "chat_msg"
  backend.rabbit.chat_msg_exchange.sent_topic = "chat_msg_sent"
  backend.rabbit.chat_msg_exchange.recv_topic = "chat_msg_recv"
  backend.rabbit.groupchat_msg_exchange.name = "groupchat_msg"
  backend.rabbit.groupchat_msg_exchange.sent_topic = "groupchat_msg_sent"
  backend.rabbit.groupchat_msg_exchange.recv_topic = "groupchat_msg_recv"

[modules.mod_extdisco]
  [[modules.mod_extdisco.service]]
    type = "stun"
    host = "stun1"
    port = 3478
    transport = "udp"
    username = "username"
    password = "password"
  [[modules.mod_extdisco.service]]
    type = "stun"
    host = "stun2"
    port = 2222
    transport = "tcp"
    username = "username"
    password = "password"
  [[modules.mod_extdisco.service]]
    type = "turn"
    host = "192.168.0.1"

[modules.mod_http_upload]
  host = "upload.@HOST@"
  backend = "s3"
  expiration_time = 120
  s3.bucket_url = "https://s3-eu-west-1.amazonaws.com/mybucket"
  s3.region = "eu-west-1"
  s3.add_acl = true
  s3.access_key_id = "AKIAIOSFODNN7EXAMPLE"
  s3.secret_access_key = "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

[modules.mod_inbox]
  backend = "rdbms"
  reset_markers = ["displayed"]
  aff_changes = true
  remove_on_kicked = true
  groupchat = ["muclight"]

[modules.mod_global_distrib]
  global_host = "example.com"
  local_host = "datacenter1.example.com"
  connections.endpoints = [{host = "172.16.0.2", port = 5555}]
  connections.advertised_endpoints = [{host = "172.16.0.2", port = 5555}]
  connections.tls.certfile = "priv/dc1.pem"
  connections.tls.cacertfile = "priv/ca.pem"
  connections.connections_per_endpoint = 30
  cache.domain_lifetime_seconds = 60
  bounce.resend_after_ms = 300
  bounce.max_retries = 3
  redis.pool = "global_distrib"

[modules.mod_jingle_sip]
  proxy_host = "localhost"
  proxy_port = 5600
  listen_port = 5600
  local_host = "localhost"
  sdp_origin = "127.0.0.1"

[modules.mod_keystore]
  ram_key_size = 1000

  [[modules.mod_keystore.keys]]
    name = "access_secret"
    type = "ram"

  [[modules.mod_keystore.keys]]
    name = "access_psk"
    type = "file"
    path = "priv/access_psk"

  [[modules.mod_keystore.keys]]
    name = "provision_psk"
    type = "file"
    path = "priv/provision_psk"

[modules.mod_last]
  backend = "mnesia"
  iqdisc = {"type" = "queues", "workers" = 10}

[modules.mod_mam_meta]
  backend = "rdbms"
  no_stanzaid_element = true
  is_archivable_message = "mod_mam_utils"
  archive_chat_markers = true
  full_text_search = true
  pm.user_prefs_store = "rdbms"
  pm.full_text_search =  false
  muc.host = "muc.example.com"
  muc.rdbms_message_format = "simple"
  muc.async_writer = false
  muc.user_prefs_store = "mnesia"

[modules.mod_muc]
  host = "muc.example.com"
  access = "muc"
  access_create = "muc_create"
  http_auth_pool = "my_auth_pool"
  default_room.password_protected = true

  [[modules.mod_muc.default_room.affiliations]]
    user = "alice"
    server = "localhost"
    resource = "resource1"
    affiliation = "member"

  [[modules.mod_muc.default_room.affiliations]]
    user = "bob"
    server = "localhost"
    resource = "resource2"
    affiliation = "owner"

[modules.mod_muc_log]
  outdir = "www/muc"
  access_log = "muc"
  css_file = "path/to/css/file"
  top_link.target = "/"
  top_link.text = "Home"

[modules.mod_muc_light]
  host = "muclight.example.com"
  equal_occupants = true
  legacy_mode = true
  rooms_per_user = 10
  blocking = false
  all_can_configure = true
  all_can_invite = true
  max_occupants = 50
  rooms_per_page = 5
  rooms_in_rosters = true

  [[modules.mod_muc_light.config_schema]]
    field = "roomname"
    value = "The Room"

  [[modules.mod_muc_light.config_schema]]
    field = "display-lines"
    value = 30
    internal_key = "display_lines"
    type = "integer"

[modules.mod_offline]
  access_max_user_messages = "max_user_offline_messages"
  backend = "riak"
  riak.bucket_type = "offline"

[modules.mod_ping]
  send_pings = true
  ping_interval = 60
  timeout_action = "none"
  ping_req_timeout = 32

[modules.mod_pubsub]
  access_createnode = "pubsub_createnode"
  ignore_pep_from_offline = false
  backend = "rdbms"
  last_item_cache = "mnesia"
  max_items_node = 1000
  plugins = ["flat", "pep"]

  [[modules.mod_pubsub.pep_mapping]]
    namespace = "urn:xmpp:microblog:0"
    node = "mb"

[modules.mod_push_service_mongoosepush]
  pool_name = "mongoose_push_http"
  api_version = "v3"
  max_http_connections = 100

[modules.mod_register]
  welcome_message = {subject = "Subject", body = "Body"}
  access = "all"
  registration_watchers = ["JID1", "JID2"]
  password_strength = 32

  [[modules.mod_revproxy.routes]]
    host = "www.erlang-solutions.com"
    path = "/admin"
    method = "_"
    upstream = "https://www.erlang-solutions.com/"

  [[modules.mod_revproxy.routes]]
    host = ":var.com"
    path = "/:var"
    upstream = "http://localhost:8080/"

  [[modules.mod_revproxy.routes]]
    host = ":domain.com"
    path = "/"
    method = "_"
    upstream = "http://localhost:8080/:domain"

[modules.mod_roster]
  versioning = true
  store_current_id = true

[modules.mod_shared_roster_ldap]
  ldap_base = "ou=Users,dc=ejd,dc=com"
  ldap_groupattr = "ou"
  ldap_memberattr = "cn"
  ldap_userdesc = "cn"
  ldap_filter = "(objectClass=inetOrgPerson)"
  ldap_rfilter = "(objectClass=inetOrgPerson)"
  ldap_group_cache_validity = 1
  ldap_user_cache_validity = 1

[modules.mod_stream_management]
  buffer_max = 30
  ack_freq = 1
  resume_timeout = 600
  stale_h.enabled = true
  stale_h.repeat_after = 1800
  stale_h.geriatric = 3600

[modules.mod_vcard]
  matches = 1
  search = true
  host = "directory.example.com"

  [[modules.mod_vcard.ldap_vcard_map]]
    vcard_field = "FAMILY"
    ldap_pattern = "%s"
    ldap_field = "sn"

  [[modules.mod_vcard.ldap_vcard_map]]
    vcard_field = "FN"
    ldap_pattern = "%s"
    ldap_field = "displayName"

  [[modules.mod_vcard.ldap_search_fields]]
    search_field = "User"
    ldap_field = "%u"

  [[modules.mod_vcard.ldap_search_fields]]
    search_field = "Full Name"
    ldap_field = "displayName"

  [[modules.mod_vcard.ldap_search_reported]]
    search_field = "Full Name"
    vcard_field = "FN"

  [[modules.mod_vcard.ldap_search_reported]]
    search_field = "Given Name"
    vcard_field = "FIRST"

[modules.mod_version]
  os_info = true
